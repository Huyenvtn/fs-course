{"version":3,"sources":["services/Persons.js","components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","personService","getAll","axios","get","then","response","data","create","newObject","post","remove","id","delete","update","put","Filter","props","search","handleFilter","value","onChange","PersonForm","name","number","handleNameChange","handleNumberChange","addContact","onSubmit","type","Persons","handleDelete","onClick","Notification","message","classes","className","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","setSearch","showAll","setShowAll","setMessage","messageType","setMessageType","showMessage","setShowMessage","useEffect","personsList","e","target","personDelete","find","x","window","confirm","res","catch","error","setTimeout","personsToShow","filter","person","toLowerCase","includes","preventDefault","personUpdate","match","result","personObj","returnedPerson","map","length","concat","alert","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.adcabf76.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then( response => response.data )\n}\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data )\n}\n\nconst remove = id => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response)\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n}\nconst personService = { getAll, create, remove, update }\nexport default personService\n","import React from  'react'\n\nconst Filter = (props) => {\n    const { search, handleFilter } = props\n    return (\n        <div>\n            filter shown with <input value={search} onChange={handleFilter}/>\n        </div>\n    )\n}\n\nexport default Filter","import React from  'react'\n\nconst PersonForm = (props) => {\n    const { name, number, handleNameChange, handleNumberChange, addContact } = props\n    return (\n        <div>\n            <form onSubmit={addContact}>\n                <div>\n                    name: <input value={name} onChange={handleNameChange}/>\n                </div>\n                <div>\n                    number: <input value={number} onChange={handleNumberChange}/>\n                </div>\n                <div>\n                    <button type=\"submit\">add</button>\n                </div>\n            </form>\n        </div>\n    )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Persons = ({name, number, handleDelete}) => {\n    return <div>{name} {number} <button onClick={handleDelete} value={name}>delete</button></div>\n}\n\nexport default Persons","import React from 'react'\nimport '../index.css'\n\nconst Notification = ({message, classes}) => {\n    return <div className={classes}>{message}</div>\n}\n\nexport default Notification\n","import React, { useState, useEffect } from 'react'\nimport personService from './services/Persons'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  const [persons, setPersons] = useState([]) \n  const [newName, setNewName] = useState('a new name')\n  const [newNumber, setNewNumber] = useState('0123456789')\n  const [search, setSearch] = useState('')\n  const [showAll, setShowAll] = useState(true)\n  const [message, setMessage] = useState('')\n  const [messageType, setMessageType] = useState('')\n  const [showMessage, setShowMessage] = useState(false)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(personsList => {\n        setPersons(personsList)\n      })\n  }, [])\n \n  const addContact = (e) => {\n    e.preventDefault()\n    const personUpdate = persons.find(person => person.name === newName);\n    const regex = /^\\(?([0-9]{2,3})\\)?[-. ]?([0-9]{2,3})[-. ]?([0-9]{4,6})$/;\n    \n    if (!newNumber.match(regex)) {\n      window.alert(`${newNumber} is not a phone number`)\n    } else {\n      if (personUpdate) {\n        const result = window.confirm(`${newName} is already added to phone book, replace the old number with a new one ?`)\n        const personObj = {\n          id: personUpdate.id,\n          name: newName,\n          number: newNumber,\n        }\n        if (result) {\n          personService\n            .update(personUpdate.id, personObj)\n            .then(returnedPerson => {\n              setMessage(`Updated ${newName}`)\n              setMessageType('success')\n              setShowMessage(true)\n              setTimeout(function () {\n                setShowMessage(false)\n              }, 5000);\n              setPersons(persons.map(person => person.id !== personUpdate.id ? person : returnedPerson))\n            })\n            .catch(error => {\n              setMessage(error.response.data.error)\n              setMessageType('error')\n              setShowMessage(true)\n              setTimeout(function () {\n                setShowMessage(false)\n              }, 5000)\n            })\n        }\n      } else {\n        const personObj = {\n          id: persons.length + 1,\n          name: newName,\n          number: newNumber,\n        }\n        personService\n          .create(personObj)\n          .then(person => {\n            setMessage(`Added ${newName}`)\n            setMessageType('success')\n            setShowMessage(true)\n            setTimeout(function () {\n              setShowMessage(false)\n            }, 5000)\n            setPersons(persons.concat(person))\n          })\n          .catch(error => {\n            setMessage(error.response.data.error)\n            setMessageType('error')\n            setShowMessage(true)\n            setTimeout(function () {\n              setShowMessage(false)\n            }, 5000)\n          })\n\n        setNewName('')\n        setNewNumber('')\n      }\n    }\n  }\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value)\n  }\n\n  const handleNumberChange = (e) => {\n    setNewNumber(e.target.value)\n  }\n\n  const handleFilter = (e) => {\n    if (e.target.value !== ''){\n      setShowAll(false)\n      setSearch(e.target.value)\n    } else {\n      setSearch('')\n    }\n  }\n\n  const handleDelete = (e) => {\n    const name = e.target.value\n    const personDelete = persons.find(x => x.name === name);\n    const result = window.confirm(`Delete ${name} ?`);\n    \n    if (result) {\n      personService\n        .remove(personDelete.id)\n        .then(res => {\n          personService\n            .getAll()\n            .then(personsList => {\n              setPersons(personsList)\n            })\n        })\n        .catch(error => {\n          setMessage(error.response.data.error)\n          setMessageType('error')\n          setShowMessage(true)\n          setTimeout(function () {\n            setShowMessage(false)\n          }, 5000)\n        })\n    }\n  }\n\n  const personsToShow = showAll\n    ? persons\n    : persons.filter(person => person.name.toLowerCase().includes(search.toLowerCase()))\n\n  return (\n    <div>\n      <h2>Phone book</h2>\n      {showMessage ? (\n        <Notification message={message} classes={messageType}/>): (\n        <div></div>\n      )}\n      <Filter value={search} handleFilter={handleFilter} />\n      <h2>add a new</h2>\n      <PersonForm \n        name={newName} \n        number={newNumber} \n        handleNameChange={handleNameChange} \n        handleNumberChange={handleNumberChange} \n        addContact={addContact} \n      />\n      <h2>Numbers</h2>\n      {personsToShow.map(person => (<Persons key={person.id} name={person.name} number={person.number} handleDelete={handleDelete} />)\n      )}\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}