(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(15),r=n.n(a),u=n(3),o=n(4),i=n.n(o),s="/api/persons",d={getAll:function(){return i.a.get(s).then((function(e){return e.data}))},create:function(e){return i.a.post(s,e).then((function(e){return e.data}))},remove:function(e){return i.a.delete("".concat(s,"/").concat(e)).then((function(e){return e}))},update:function(e,t){return i.a.put("".concat(s,"/").concat(e),t).then((function(e){return e.data}))}},b=n(0),j=function(e){var t=e.search,n=e.handleFilter;return Object(b.jsxs)("div",{children:["filter shown with ",Object(b.jsx)("input",{value:t,onChange:n})]})},l=function(e){var t=e.name,n=e.number,c=e.handleNameChange,a=e.handleNumberChange,r=e.addContact;return Object(b.jsx)("div",{children:Object(b.jsxs)("form",{onSubmit:r,children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{value:t,onChange:c})]}),Object(b.jsxs)("div",{children:["number: ",Object(b.jsx)("input",{value:n,onChange:a})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})})},h=function(e){var t=e.name,n=e.number,c=e.handleDelete;return Object(b.jsxs)("div",{children:[t," ",n," ",Object(b.jsx)("button",{onClick:c,value:t,children:"delete"})]})},f=(n(40),function(e){var t=e.message,n=e.classes;return Object(b.jsx)("div",{className:n,children:t})}),m=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)("a new name"),o=Object(u.a)(r,2),i=o[0],s=o[1],m=Object(c.useState)("0123456789"),O=Object(u.a)(m,2),v=O[0],p=O[1],x=Object(c.useState)(""),g=Object(u.a)(x,2),w=g[0],C=g[1],S=Object(c.useState)(!0),k=Object(u.a)(S,2),N=k[0],T=k[1],A=Object(c.useState)(""),D=Object(u.a)(A,2),y=D[0],E=D[1],F=Object(c.useState)(""),J=Object(u.a)(F,2),L=J[0],B=J[1],I=Object(c.useState)(!1),P=Object(u.a)(I,2),U=P[0],$=P[1];Object(c.useEffect)((function(){d.getAll().then((function(e){a(e)}))}),[]);var q=function(e){var t=e.target.value,c=n.find((function(e){return e.name===t}));window.confirm("Delete ".concat(t," ?"))&&d.remove(c.id).then((function(e){d.getAll().then((function(e){a(e)}))})).catch((function(e){E(e.response.data.error),B("error"),$(!0),setTimeout((function(){$(!1)}),5e3)}))},z=N?n:n.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}));return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phone book"}),U?Object(b.jsx)(f,{message:y,classes:L}):Object(b.jsx)("div",{}),Object(b.jsx)(j,{value:w,handleFilter:function(e){""!==e.target.value?(T(!1),C(e.target.value)):C("")}}),Object(b.jsx)("h2",{children:"add a new"}),Object(b.jsx)(l,{name:i,number:v,handleNameChange:function(e){s(e.target.value)},handleNumberChange:function(e){p(e.target.value)},addContact:function(e){e.preventDefault();var t=n.find((function(e){return e.name===i}));if(v.match(/^\(?([0-9]{2,3})\)?[-. ]?([0-9]{2,3})[-. ]?([0-9]{4,6})$/))if(t){var c=window.confirm("".concat(i," is already added to phone book, replace the old number with a new one ?")),r={id:t.id,name:i,number:v};c&&d.update(t.id,r).then((function(e){E("Updated ".concat(i)),B("success"),$(!0),setTimeout((function(){$(!1)}),5e3),a(n.map((function(n){return n.id!==t.id?n:e})))})).catch((function(e){E(e.response.data.error),B("error"),$(!0),setTimeout((function(){$(!1)}),5e3)}))}else{var u={id:n.length+1,name:i,number:v};d.create(u).then((function(e){E("Added ".concat(i)),B("success"),$(!0),setTimeout((function(){$(!1)}),5e3),a(n.concat(e))})).catch((function(e){E(e.response.data.error),B("error"),$(!0),setTimeout((function(){$(!1)}),5e3)})),s(""),p("")}else window.alert("".concat(v," is not a phone number"))}}),Object(b.jsx)("h2",{children:"Numbers"}),z.map((function(e){return Object(b.jsx)(h,{name:e.name,number:e.number,handleDelete:q},e.id)}))]})};r.a.render(Object(b.jsx)(m,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.adcabf76.chunk.js.map